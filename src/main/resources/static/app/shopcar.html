<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>购物车</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <script src="js/rem.js"></script>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/base.css"/>
    <link rel="stylesheet" type="text/css" href="css/page.css"/>
    <link rel="stylesheet" type="text/css" href="css/all.css"/>
    <link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/loaders.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/loading.css"/>
    <script type="text/javascript">
        $(window).load(function () {
            $(".loading").addClass("loader-chanage")
            $(".loading").fadeOut(300)

            alert("666");
            $.ajax({
                type: "post",
                debug: true,
                url: "http://localhost:8080/wechat/selCar.do",
                dataType: "json",

                success: function (data) {

                    alert(data);
                    var size1 = data.length;
                    alert(size1);
                    for (var i = 0; i < data.length ; i++) {
                        alert("判断");
                        if (data[i].listSku[0].status == 1) {
                            alert("status=1");
                            alert(data[i].listSku[0].salePrice);
                            var sum = (data[i].listSku[0].activePrice) * (data[i].productSkuNum);
                            sum++;
                            alert("sum"+sum);
                            var str = "<section class=\"shopcar\">\n" +
                                "<div class=\"shopcar-checkbox\">\n" +
                                "<label for=\"shopcar\" ></label>\n" +
                                "<input type=\"checkbox\" id=\"shopcar\" name=\"checkbox\" value=\""+data[i].listSku[0].id+"\"/>" +
                                "\t</div>\n" +
                                "\t<figure><img src=\"\"/></figure>\n" +
                                "\t<div class=\"shopclist clearfloat fl\" id=\"display\"><p class=\"tit\">" + data[i].listSku[0].poductSpu.describe + "</p>\n" +
                                "<p class=\"fu-tit\">" + data[i].listSku[0].color + "</p>\n" +
                                "<div class=\"bottom clearfloat\">\n" +
                                "<span class=\"fl hicon\">" + data[i].listSku[0].activePrice + "</span>\n" +
                                "<span class=\"fl huicon\">" + data[i].listSku[0].salePrice + "</span>\n" +
                                "<span class=\"fl sjzx\">手机专享价</span>\n" +
                                "<span class=\"fr shu\">×" + data[i].productSkuNum + "</span>\n" +
                                "</div>\t</div>\n" +
                                "</section>";
                            $("#display").append(str);

                        } else {

                            alert("status不等于1");
                            alert(data[i].listSku[0].salePrice);
                            alert(data[i].listSku);
                            alert(data[i].listSku[0]);
                            alert(data[i].listSku[0].poductSpu);
                            alert(data[i].listSku[0].poductSpu.describe);
                            alert(data[i].listSku[0].id);
                            var sum2 = (data[i].listSku[0].salePrice) * (data[i].productSkuNum);
                            sum2++;
                            alert("sum2"+sum2);
                            var str = "<section class=\"shopcar\">\n" +
                                "<div class=\"shopcar-checkbox\">\n" +
                                "<label for=\"shopcar\" ></label>\n" +
                                "<input type=\"checkbox\" id=\"shopcar\" name=\"checkbox\" value=\""+data[i].listSku[0].id+"\"/>" +
                                "\t</div>\n" +
                                "\t<figure><img src=\"\"/></figure>\n" +
                                "\t<div class=\"shopclist clearfloat fl\" id=\"display\"><p class=\"tit\">" + data[i].listSku[0].poductSpu.describe + "</p>\n" +
                                "<p class=\"fu-tit\">" + data[i].listSku[0].color + "</p>\n" +
                                "<div class=\"bottom clearfloat\">\n" +
                                "<span class=\"fl hicon\">" + data[i].listSku[0].salePrice + "</span>\n" +
                                // "<span class=\"fl huicon\>" + data.get(i).getListSku().get(i).getSalePrice()+"< /span>\n" +
                                "<span class=\"fl sjzx\">手机专享价</span>\n" +
                                "<span class=\"fr shu\">×" + data[i].productSkuNum + "</span>\n" +
                                "</div>\t</div>\n" +
                                "</section>";
                            $("#display").append(str);

                        }
                    }
                    var sum1=sum+sum2;
                    var sum3 = "<span>合计：</span>￥" + sum1;
                    $("#sum").append(sum3);

                    var zhi;

                    function abc() {
                        alert("a");
                        var idsstr = " ";
                        var zhi = " ";
                        $("input[name=checkbox]").each(function () { //遍历table里的全部checkbox
                            idsstr += $(this).val() + ","; //获取所有checkbox的值
                            if ($(this).attr("checked")) {
                                zhi += $(this).val() + ",";
                            }//如果被选中
                             //获取被选中的值
                        });
                        // if(idsstr.length > 0) //如果获取到
                        //     idsstr = idsstr.substring(0, idsstr.length - 1); //把最后一个逗号去掉
                        // if(zhi.length > 0) //如果获取到
                        //     zhi = zhi.substring(0, zhi.length - 1); //把最后一个逗号去掉
                        alert("所有checkbox的值：" + idsstr);
                        alert("被选中checkbox的值：" + zhi);
                        // document.getElementById("fm1").action="http://ph5fhig.hn3.mofasuidao.cn/wechat/selCar2"+zhi
                        // document.getElementById("fm1").submit();
                        // document.form.action="<%=path%>/delete1/?zhi="+zhi
//	document.form.submit()

                        $.ajax({
                            debug: true,
                            url: "http://localhost:8080/wechat/selCar2",
                            type: "post",
                            data: {"zhi": zhi},
                            dataType: "json",
                            success: function (data) {

                            }

                        })

                    }
                }
            })


        })


    </script>
</head>
<!--loading页开始-->
<div class="loading">
    <div class="loader">
        <div class="loader-inner pacman">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
<!--loading页结束-->
<body>
<header class="mui-bar mui-bar-nav" id="header">
    <div class="header-left fl">
        购物车
    </div>
    <div class="header-right fr">
        <a href="#">
            编辑
        </a>
    </div>
</header>
<div id="main" class="mui-clearfix">
    <div class="contaniner fixed-contb">
        <!--<section class="shopcar">-->
        <!--<div class="shopcar-checkbox">-->
        <!--<label for="shopcar" onselectstart="return false"></label>-->
        <!--<input type="checkbox" id="shopcar"/>-->
        <!--</div>-->
        <!--<figure><img src="upload/2.jpg"/></figure>-->
        <!--<div class="shopclist clearfloat fl" id="display">-->
        <!--&lt;!&ndash;<p class="tit">XXX夏季女装性感流行</p>&ndash;&gt;-->
        <!--&lt;!&ndash;<p class="fu-tit">&ndash;&gt;-->
        <!--&lt;!&ndash;粉红性感流行L尺寸&ndash;&gt;-->
        <!--&lt;!&ndash;</p>&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="bottom clearfloat">&ndash;&gt;-->
        <!--&lt;!&ndash;<span class="fl hicon">￥299.00</span>&ndash;&gt;-->
        <!--&lt;!&ndash;<span class="fl huicon">￥308</span>&ndash;&gt;-->
        <!--&lt;!&ndash;<span class="fl sjzx">手机专享价</span>&ndash;&gt;-->
        <!--&lt;!&ndash;<span class="fr shu">×1</span>&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--</div>-->
        <!--</section>-->
        <div id="display"></div>

        <!--去结算-->
        <section class="shopcar shopcartwo">
            <div class="shopcar-checkbox">
                <label for="shopcar" onselectstart="return false"></label>
                <input type="checkbox" id="shopcar"  onclick="abc()"/>
            </div>
            <span class="fl qxuan">全选</span>
            <a    href="confirm.html" class="jiesuan clearfloat fr box-s">去结算</a>
            <p class="fr heji" id="sum"></p>
        </section>
    </div>
    <script type="text/javascript">
        $(".shopcar-checkbox label").on('touchstart', function () {
            if ($(this).hasClass('shopcar-checkd')) {
                $(".shopcar-checkbox label").removeClass("shopcar-checkd")
            } else {
                $(".shopcar-checkbox label").addClass("shopcar-checkd")
            }
        })
    </script>

</div>

<footer class="page-footer fixed-footer" id="footer">
    <ul>
        <li>
            <a href="index.html">
                <img src="img/footer001.png"/>
                <p>首页</p>
            </a>
        </li>
        <li>
            <a href="assort.html">
                <img src="img/footer002.png"/>
                <p>分类</p>
            </a>
        </li>
        <li class="active">
            <a href="shopcar.html">
                <img src="img/footer003.png"/>
                <p>购物车</p>
            </a>
        </li>
        <li>
            <a href="pcenter.html">
                <img src="img/footer004.png"/>
                <p>个人中心</p>
            </a>
        </li>
    </ul>
</footer>
</body>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script src="js/jquery.SuperSlide.2.1.js" type="text/javascript"></script>
<script src="js/fastclick.js"></script>
<script src="js/mui.min.js"></script>
<script type="text/javascript" src="js/hmt.js"></script>
<!--插件-->
<link rel="stylesheet" href="css/swiper.min.css">
<script src="js/swiper.jquery.min.js"></script>
<!--插件-->
<script src="js/global.js"></script>
<!--<script>-->
    <!--$(function () {-->
        <!--var banner = new Swiper('.banner', {-->
            <!--autoplay: 5000,-->
            <!--pagination: '.swiper-pagination',-->
            <!--paginationClickable: true,-->
            <!--lazyLoading: true,-->
            <!--loop: true-->
        <!--});-->

        <!--mui('.pop-schwrap .sch-input').input();-->
        <!--var deceleration = mui.os.ios ? 0.003 : 0.0009;-->
        <!--mui('.pop-schwrap .scroll-wrap').scroll({-->
            <!--bounce: true,-->
            <!--indicators: true,-->
            <!--deceleration: deceleration-->
        <!--});-->
        <!--$('.top-sch-box .fdj,.top-sch-box .sch-txt,.pop-schwrap .btn-back').on('click', function () {-->
            <!--$('html,body').toggleClass('holding');-->
            <!--$('.pop-schwrap').toggleClass('on');-->
            <!--if ($('.pop-schwrap').hasClass('on')) {-->
                <!--;-->
                <!--$('.pop-schwrap .sch-input').focus();-->
            <!--}-->
        <!--});-->

    <!--});-->
<!--</script>-->
<!--<script type="text/javascript">-->
    <!--jQuery(".sideMenu").slide({-->
        <!--titCell: "h3",-->
        <!--targetCell: ".slist",-->
        <!--effect: "slideDown",-->
        <!--delayTime: 300,-->
        <!--triggerTime: 150,-->
        <!--defaultPlay: true,-->
        <!--returnDefault: false,-->
        <!--trigger: "click"-->
    <!--});-->
<!--</script>-->
</html>
